### 锁

1. 乐观锁和悲观锁

```
乐观锁：
    定义：总是假设拿数据的时候，数据不会被别人改变，所以不会上锁，但是在更新的时候会判断在此期间有别人有没有去更新这个数据；
    场景：多读场景；
    缺陷：在更新数据的时候加锁，如果更新慢，会导致其他线程拿数据需要等待锁释放，引起阻塞；
悲观锁：
    定义：总是假设获取数据的时候，数据都会被别人改变，所以在拿数据的时候，会加上锁，其他线程如果需要操作这个数据，需要等待锁释放；
    场景：行锁，表锁，读写锁；
    缺陷：频繁加锁，释放锁，会导致其他线程进入阻塞状态，引起性能问题；

锁的选择：
    并发小的情况：使用乐观锁；
    并发大的时候：使用悲观锁；
    多读场景：使用乐观锁；
    多写场景：使用悲观锁；
```
